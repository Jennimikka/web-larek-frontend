# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание интерфейсов
1. IProductItem - описывает интерфейс карточки продукта. Содержит свойства:    
    * id: string,
    * description: string,
    * image: string,
    * title: string,
    * category: string,
    * price: number
2. IOrderResult  - описывает ответ сервера на успешный заказюСодержит свойства:
    * id: string;
    * total: number; 
3. IFormState - описывает интерфейс валидации формы. Содержит свойства:
    * valid: boolean; (валидность формы)
    * errors: string[]; (блок с ошибками)
4. IOrder - описывает интерфейс формы заказа. Содержит свойства:
    * payment: PaymentMethod;
    * email: string;
    * phone: string;
    * address: string;
    * total: number;
    * items: string[]
5. IOrderAddress - описывает интерфейс формы оплаты и доставки. Содержит метод оплаты и адрес в типе строка.
6. IContactsOrder - описывает интерфейс формы контактов. Содержит адрес и телефон в типе строка.
7. IAppStateModel описывает интерфейс состояния приложения. Содержит свойства:
   * catalog: IProductItem[];
   * basket: string[]; 
   * order: IOrder | null;  
8. IBasketCard - описывает интерфейс карточки в корзине. Содержит название товара и стоимость:
   * title: string;
   * price: number; 
9. IOrderResult - Описывает интерфейс результата заказа:
    * id: string;
    * total: number;
## При разработке архитектуры приложения, использовался паттерн MVP

## Описание базовых классов, их предназначение и функции
1. Класс Api - осуществляет работу с сервером, отправляет запросы методами get и post для получаения и отправки данных
2. Абстрактный Kлacc Component - базовый класс компонента. Методы: toggleClass (Переключает класс),setDisabled (меняет статус блокировки),  render (возвращает корневой DOM-элемент)     
 


### слой Model:
Класс AppStateModel - наследует Model<IAppStateModel>. Содержит методы для отправки в корзину, удаления из корзины, очистки корзины, валидации формы, проверки заполнения полей.
Абстрактный класс Model - Абстрактный базовый класс для создания объекта хранения данных


### слой View:
1. Класс Page: наследуется от класса Component<IPage>, отрисовывает главную страницу. Имеет методы: 
* set counter (показывает сколько товаров в корзине)    
* set catalog(items: HTMLElement[]) (передает в каталог массив карточек)
* set locked(value: boolean) (устанавливает класс блокировки прокрутки страницы при открытии модального окна) 

2. Класс Card: наследуется от класса Component<ICard<T>, отображает данные о товаре и устанавливает основные свойства карточки товара:
    * title: HTMLElement; название 
    * image: image: HTMLImageElement; изображение
    * description?: HTMLElement;
    * button?: HTMLButtonElement; кнопка убрать/купить
    * price: HTMLElement; цена
    * category: HTMLElement; категория товара    

3. Класс Basket:  наследуется от класса Component<IBasketView>, класс представления корзины приложения.Устанавливает такие её свойства:
* list - список элементов в корзине
* total - общую стоимость товаров
* button - кнопку перехода на следующую стадию - оформление заказа 
4. Класс BasketCard: наследуется от класса Component<IBasketCard>, содержит представление карточки товара в корзине.
##### устанавливает свойства:
    * index: HTMLElement; номер продукта в корзине 
    * title: HTMLElement; название товара
    * button: HTMLButtonElement; кнопку удаления
    * price: HTMLElement; стоимость
    
5. Класс Modal: наследуется от класса Component<IModalData>, содержит информацию отображения модального окна, включающую основной content и close__button (кнопку закрытия), имеет методы открытия и закрытия модального окна.
6. Класс Form: наследуется от класса Component<IFormState>, описывает базовую форму отправки данных. Позволяет установить кнопку со свойством submit и блок с отображением ошибок - errors.
    * submit: HTMLButtonElement;
    * errors: HTMLElement;

7. Класс OrderAddress: наследуется от класса  Form<IOrderAddress>. Устанавливает следующие свойства:
    * payment: PaymentMethod; - способ оплаты
    * address: string; - адрес доставки
8. Класс ContactOrder: наследуется от класса Form<IContactsOrder>. Устанавливает следующие свойства:
    * email: string; - почта для связи
    * phone: string; - телефон для связи
9. Класс Success: наследуется от класса Component<ISuccess>, отображает основную информацию по завершенному заказу, содержит свойство total - общая сумма заказа - получаемое с сервера, окно закрывается кнопкой закрытия:
    * close: HTMLElement;
    * total: HTMLElement;



### слой presenter:
Класс EventEmitter: несет в себе функции слоя Представления.Обеспечивает работу событий приложения. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события».

### методы класса: 
* on - Устанавливает обработчик на событие
* off - Снимает обработчик на событие
* emit - Инициировует событие с данными 
* onAll - Устанавливает слушатель на все события
* offAll - Сбрасывает подписки на все события 


## Класс LarekApi - обеспечивает работу с конкретными данными с сервера:
### методы класса LarekApi: 
1. getProductList: () => Promise<IProductItem[]>; получает информацию по всем доступным товарам
2. getProductItem: (id: string) => Promise<IProductItem>; получает информацию по конкретному товару
3. orderProduct: (order: IOrder) => Promise<IOrderResult>; оформления заказа через соответствующий запрос на сервер


index.ts - является главным файлом приложения, обеспечивая взаимодействие всех компонентов приложения между собой и с внешними источниками данных.
